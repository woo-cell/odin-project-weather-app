(()=>{let e="",t="";const n="8d3ddf6f7bb003167b9c01b888993ef4",o=document.getElementById("city-input"),r=document.getElementById("search-button"),c=document.getElementById("units");async function s(e,t,n){const o=await async function(e,t){try{const n=await fetch(`https://api.openweathermap.org/geo/1.0/direct?q=${e}&appid=${t}`,{mode:"cors"});return await n.json()}catch(e){console.log(e)}}(e,t);try{const e=await fetch(`https://restcountries.com/v3.1/name/${o[0].country}`,{mode:"cors"});!function(e,t){const n=e.filter((e=>e.cca2===t[0].country)),o=n[0].name.common,r=n[0].flags,c=t[0].name;document.querySelector(".city-name").innerHTML=`${c}, </br> ${o}`;const s=document.querySelector(".city > img");s.src=r.svg,s.alt=r.alt}(await e.json(),o)}catch(e){console.log(e)}try{const e=await fetch(`https://api.openweathermap.org/data/2.5/forecast?lat=${o[0].lat}&lon=${o[0].lon}&appid=${t}&units=${n}&cnt=40`,{mode:"cors"});!function(e,t){(function(e,t){const n=document.querySelector(".temp"),o=document.querySelector(".feels-like");n.textContent=`${e.list[0].main.temp} ${"metric"===t?"°C":"°F"}`,o.textContent=`feels like ${e.list[0].main.feels_like} ${"metric"===t?"°C":"°F"}`})(e,t),function(e,t){const n=document.querySelector(".desc"),o=document.querySelector(".info-now > img"),r=document.querySelector(".date");n.textContent=`${e.list[0].weather[0].description}`,o.src=`https://openweathermap.org/img/wn/${e.list[0].weather[0].icon}@2x.png`,o.alt=`${e.list[0].weather[0].description}`;const c=function(e){const t=new Date,n=t.getTime()+6e4*t.getTimezoneOffset(),{timezone:o}=e.city;return new Date(n+1e3*o)}(e),s=c.getDate()<10?`0${c.getDate()}`:c.getDate(),u=["January","February","March","April","May","June","July","August","September","October","November","December"][c.getMonth()],a=c.getHours()<10?`0${c.getHours()}`:c.getHours(),i=c.getMinutes()<10?`0${c.getMinutes()}`:c.getMinutes();r.textContent=`${s} ${u} ${c.getFullYear()}, ${a}:${i}`}(e),function(e,t){const n=document.querySelector(".pressure"),o=document.querySelector(".humidity"),r=document.querySelector(".cloudiness"),c=document.querySelector(".wind"),s=document.querySelector(".sunrise"),u=document.querySelector(".sunset");n.textContent=`pressure: ${e.list[0].main.pressure} hPa`,o.textContent=`humidity: ${e.list[0].main.humidity} %`,r.textContent=`cloudiness: ${e.list[0].clouds.all} %`,c.textContent=`wind speed: ${e.list[0].wind.speed} ${"metric"===t?"meter/s":"miles/h"}`;const a=function(e){const{sunrise:t}=e.city,n=6e4*(new Date).getTimezoneOffset(),{timezone:o}=e.city;return new Date(1e3*t+(1e3*o+n))}(e),i=a.getHours()<10?`0${a.getHours()}`:a.getHours(),l=a.getMinutes()<10?`0${a.getMinutes()}`:a.getMinutes();s.textContent=`sunrise: ${i}:${l}`;const d=function(e){const{sunset:t}=e.city,n=6e4*(new Date).getTimezoneOffset(),{timezone:o}=e.city;return new Date(1e3*t+(1e3*o+n))}(e),m=d.getHours()<10?`0${d.getHours()}`:d.getHours(),g=d.getMinutes()<10?`0${d.getMinutes()}`:d.getMinutes();u.textContent=`sunset: ${m}:${g}`}(e,t),function(e,t){const n=document.querySelector(".date-d-one"),o=document.querySelector(".temp-d-one"),r=document.querySelector(".desc-d-one"),c=document.querySelector(".img-d-one"),s=document.querySelector(".date-d-two"),l=document.querySelector(".temp-d-two"),d=document.querySelector(".desc-d-two"),m=document.querySelector(".img-d-two"),g=document.querySelector(".date-d-three"),y=document.querySelector(".temp-d-three"),$=document.querySelector(".desc-d-three"),h=document.querySelector(".img-d-three"),w=["January","February","March","April","May","June","July","August","September","October","November","December"],p=function(e){const t=new Date,n=t.getTime()+6e4*t.getTimezoneOffset(),{timezone:o}=e.city,r=1e3*o;return{dPlusOne:new Date(n+r+864e5),dPlusTwo:new Date(n+r+1728e5),dPlusThree:new Date(n+r+2592e5)}}(e),f=p.dPlusOne.getDate()<10?`0${p.dPlusOne.getDate()}`:p.dPlusOne.getDate(),P=w[p.dPlusOne.getMonth()],S=p.dPlusOne.getFullYear(),T=p.dPlusTwo.getDate()<10?`0${p.dPlusTwo.getDate()}`:p.dPlusTwo.getDate(),q=w[p.dPlusTwo.getMonth()],D=p.dPlusTwo.getFullYear(),C=p.dPlusThree.getDate()<10?`0${p.dPlusThree.getDate()}`:p.dPlusThree.getDate(),F=w[p.dPlusThree.getMonth()],x=p.dPlusThree.getFullYear();n.textContent=`${f} ${P} ${S}`,s.textContent=`${T} ${q} ${D}`,g.textContent=`${C} ${F} ${x}`;const M=function(e){const t=e.list[0].dt_txt,n=t[11]+t[12],o=[["00",7],["03",6],["06",5],["09",4],["12",3],["15",2],["18",1],["21",0]].filter((e=>e[0]===n))[0][1],r=e.list.filter(((e,t)=>t>o));return{dayPlusOneForecast:r.filter(((e,t)=>t<=7)),dayPlusTwoForecast:r.filter(((e,t)=>t>=8&&t<=15)),dayPlusThreeForecast:r.filter(((e,t)=>t>=16&&t<=23))}}(e),b=u(M.dayPlusOneForecast),O=u(M.dayPlusTwoForecast),H=u(M.dayPlusThreeForecast);o.textContent=`${b} ${"metric"===t?"°C":"°F"}`,l.textContent=`${O} ${"metric"===t?"°C":"°F"}`,y.textContent=`${H} ${"metric"===t?"°C":"°F"}`;const v=a(M.dayPlusOneForecast),z=a(M.dayPlusTwoForecast),k=a(M.dayPlusThreeForecast);r.textContent=v,d.textContent=z,$.textContent=k;const J=i(v,M.dayPlusOneForecast),E=i(z,M.dayPlusTwoForecast),j=i(k,M.dayPlusThreeForecast);c.src=J,c.alt=v,m.src=E,m.alt=z,h.src=j,h.alt=k}(e,t)}(await e.json(),n)}catch(e){console.log(e)}}function u(e){const t=e.sort(((e,t)=>e.main.temp-t.main.temp));return((t[0].main.temp+t[7].main.temp)/2).toFixed(2)}function a(e){const t=e.map((e=>e.weather[0].description)),n={};t.forEach((e=>{n[e]?n[e]++:n[e]=1}));const o=Object.entries(n);return o.sort(((e,t)=>t[1]-e[1])),o[0][0]}function i(e,t){return`https://openweathermap.org/img/wn/${t.find((t=>t.weather[0].description===e)).weather[0].icon}@2x.png`}r.addEventListener("click",(r=>{r.preventDefault(),o.value?(e=o.value,t=c.value,s(e,n,t)):s("osaka",n,"metric")})),s("osaka",n,"metric")})();
//# sourceMappingURL=main.js.map